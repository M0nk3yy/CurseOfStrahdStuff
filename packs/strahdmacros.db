{"name":"Investigation Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"actor.rollSkill(\"inv\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/shadow_11.jpg","actorIds":[],"_id":"0Q6QqSqU32ihqPKj"}
{"name":"Show Active Effects","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"DynamicEffects.effects(true)\r\n","author":"hxuIOO4uITpZc3pG","img":"icons/d20.png","actorIds":[],"_id":"1v3ZBrDIHh9HMN8T"}
{"name":"Survival Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"actor.rollSkill(\"sur\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/green_32.jpg","actorIds":[],"_id":"2CzVf3VtDTMrvZKb"}
{"name":"Flame Arrows Damage On/Off","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"furnace":{"runAsGM":false}},"scope":"global","command":"DynamicEffects.togglePassive(\"Flame Arrows Damage\", \"feat\")","author":"hxuIOO4uITpZc3pG","img":"systems/dnd5e/icons/skills/arrow_10.jpg","actorIds":[],"_id":"4Uhl2XEX9LsdnMVZ"}
{"name":"Spike Growth Damage","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"chat","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""}},"scope":"global","command":"<div style=\"font-size: 1.25em; font-family: 'Signika'; font-weight: bold; margin: 0px; padding: 0px;\">Spike Growth</div><hr>\r\n<div style=\"margin-bottom: 7px;\"><b>Damage:</b> [[ ?{Distance Traveled|5 ft,2|10 ft,4|15 ft,6|20 ft,8|25 ft,10|30 ft,12|35 ft,14|40 ft,16}d4 ]] piercing</div>","author":"hxuIOO4uITpZc3pG","img":"systems/dnd5e/icons/spells/vines-acid-2.jpg","actorIds":[],"_id":"Auu4Q6sGKSzGQtyH"}
{"name":"GIFs","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"new Dialog({\r\n  title: \"Gif\",\r\n  content: `<div class=\"form-group\"><input type=\"text\" name=\"url\"/><label for=\"url\">Gif URL</label></div>`,\r\n  buttons: {\r\n     ok: {\r\n        label: \"OK\",\r\n        icon: `<i class=\"fas fa-check\"></i>`,\r\n        callback: html => {\r\n          const url = html.find(\"input\").val();\r\n          ChatMessage.create({\r\n            speaker: ChatMessage.getSpeaker(),\r\n            content: `<img src=${url} />`,\r\n            type: CONST.CHAT_MESSAGE_TYPES.OTHER\r\n          });\r\n          }\r\n        }\r\n        }\r\n    }).render(true);","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/emerald_04.jpg","actorIds":[],"_id":"BADfM74egLOLZrxZ"}
{"name":"Persuasion Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"actor.rollSkill(\"per\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/light_07.jpg","actorIds":[],"_id":"CjW2Hzdgdfi6wpay"}
{"name":"Perception Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"actor.rollSkill(\"prc\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/light_02.jpg","actorIds":[],"_id":"FWiKDYMbodD0gyB7"}
{"name":"Athletics Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"actor.rollSkill(\"ath\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/feats/athletic.jpg","actorIds":[],"_id":"FoPmQpKZSoz4321g"}
{"name":"Light Picker","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{},"scope":"global","command":"let dialogEditor = new Dialog({\r\n  title: `Token Light Picker`,\r\n  content: `Pick the light source the selected token is holding.`,\r\n  buttons: {\r\n    none: {\r\n      label: `None`,\r\n      callback: () => {\r\n        token.update({\"dimLight\": 0, \"brightLight\": 0, \"lightAngle\": 360,});\r\n        dialogEditor.render(true);\r\n      }\r\n    },\r\n    torch: {\r\n      label: `Torch`,\r\n      callback: () => {\r\n        token.update({\"dimLight\": 40, \"brightLight\": 20, \"lightAngle\": 360,});\r\n        dialogEditor.render(true);\r\n      }\r\n    },\r\n    lamp: {\r\n      label: `Lamp`,\r\n      callback: () => {\r\n        token.update({\"dimLight\": 45, \"brightLight\": 15, \"lightAngle\": 360,});\r\n        dialogEditor.render(true);\r\n      }\r\n    },\r\n    bullseye: {\r\n      label: `Bullseye Lantern`,\r\n      callback: () => {\r\n        token.update({\"dimLight\": 120, \"brightLight\": 60, \"lightAngle\": 45,});\r\n        dialogEditor.render(true);\r\n      }\r\n    },\r\n    hoodedOpen: {\r\n      label: `Hooded Lantern (Open)`,\r\n      callback: () => {\r\n        token.update({\"dimLight\": 60, \"brightLight\": 30, \"lightAngle\": 360,});\r\n        dialogEditor.render(true);\r\n      }\r\n    },\r\n    hoodedClosed: {\r\n      label: `Hooded Lantern (Closed)`,\r\n      callback: () => {\r\n        token.update({\"dimLight\": 5, \"brightLight\": 0, \"lightAngle\": 360,});\r\n        dialogEditor.render(true);\r\n      }\r\n    },\r\n    close: {\r\n      icon: \"<i class='fas fa-tick'></i>\",\r\n      label: `Close`\r\n    },\r\n  },\r\n  default: \"close\",\r\n  close: () => {}\r\n});\r\n\r\ndialogEditor.render(true)","author":"hxuIOO4uITpZc3pG","img":"systems/dnd5e/icons/skills/mech_14.jpg","actorIds":[],"_id":"N6xNYeMfCbpiYFUj"}
{"name":"Multiattack Defense On/Off","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"DynamicEffects.togglePassive(\"Multiattack Defense\", \"feat\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/feats/shield-focus.jpg","actorIds":[],"_id":"OX4aRMQhAch0bFuQ"}
{"name":"Blessed","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"furnace":{"runAsGM":false}},"scope":"global","command":"DynamicEffects.togglePassive(\"Blessed\", \"feat\")","author":"hxuIOO4uITpZc3pG","img":"systems/dnd5e/icons/spells/haste-sky-2.jpg","actorIds":[],"_id":"OsRSHgkcqEa8tmEt"}
{"name":"Drunnigtreh Bow (Arrows)","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Drunnigtreh Bow (Arrows)\");","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/items/weapons/thorn-bow.PNG","actorIds":[],"_id":"RMA070zFQxkLfMuX"}
{"name":"Unarmed Strike","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Unarmed Strike\");","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/yellow_08.jpg","actorIds":[],"_id":"RnlccGvpK5qBklXL"}
{"name":"Stealth Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"actor.rollSkill(\"ste\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/green_18.jpg","actorIds":[],"_id":"UsRpTBFgsObyRflF"}
{"name":"Acrobatics Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"actor.rollSkill(\"acr\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/feats/run.jpg","actorIds":[],"_id":"aS3NqgqZw54C7Gwl"}
{"name":"Hunter's Mark Damage On/Off","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"DynamicEffects.togglePassive(\"Hunter's Mark Damage\", \"feat\")","author":"hxuIOO4uITpZc3pG","img":"systems/dnd5e/icons/skills/red_11.jpg","actorIds":[],"_id":"fkCyjMjmRQP3vnmH"}
{"name":"Intimidation Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"actor.rollSkill(\"itm\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/red_01.jpg","actorIds":[],"_id":"n16s4ljNzwvriJ5v"}
{"name":"Adrenaline Surge","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""}},"scope":"global","command":"//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n//!!!   OPTIONAL TOKEN ICON-\tOn by default. If a path to a adrenaline icon is defined, it displays like a condition on the raging barbarian.\r\n//!!!\t\t\t\t\t\t\tTo use a different icon, manually change the filepath below or leave it empty ('') to disable the effect.\r\n//!!!\r\n\t\t\t\tconst adrenalineIconPath = 'icons/svg/explosion.svg';\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n//!!!   OPTIONAL RESOURCE DEDUCTION - On by default. First option automatically subtracts from the adrenaline Resource if enabled.\r\n//!!!                                 Second option prevents raging if no adrenaline resource is left. Set to false if you do not want this.\r\n\r\n\t\t\t\tconst deductResource = true;\r\n\t\t\t\tconst preventNegativeResource = true;\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n//!!!   OPTIONAL NON-STRENGTH BARBARIAN SUPPORT  - \tONLY override to FALSE if your barbarian does not use Strength to make melee attacks\r\n//!!!\t\t\t\t\t\t\tand therefore does not get the adrenaline bonus to melee weapon attack damage. \r\n//!!!\t\t\r\n\t\t\t\tconst strAttacks = true;\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n//!!!   EXPERIMENTAL MACRO ICON/NAME TOGGLE -\tIf enabled, the macro icon and name toggles based on the barbarian's adrenaline state. \r\n//!!!\t\t\t\t\t\tCAUTIONS: \t1. \tThis feature is off by default and is intended for ADVANCED USERS ONLY. \r\n//!!! \t\t\t\t\t\t\t\t2. \tRequires configuration using \"The Furnace\" module for a player to run!\r\n//!!!\t\t\t\t\t\t\t\t\tThe GM needs to grant The Furnace's \"Run as GM\" permission for this macro.\r\n//!!!\t\t\t\t\t\t\t\t3. \tWorks best with only one barbarian using this feature at a time.\r\n\r\n\t\t\t\t//To auto-toggle the macro's icon/name, override toggleMacro to true below.\r\n\t\t\t\tconst toggleMacro = false;\r\n\r\n\t\t\t\t//To use a different icon, manually change the filepath here\r\n\t\t\t\tconst stopadrenalineIconPath = 'icons/svg/unconscious.svg';\r\n\r\n\t\t\t\t//You must update the following constant to this macro's exact for the macro icon toggling to work.\r\n\t\t\t\tconst adrenalineMacroName = 'adrenaline';\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n//!!!   Bonus Tip 1: Bear Totem Spirit Barbs                                                                                                                       \r\n//!!!   If you chose the Spirit Seeker Primal path, and at level 3 you chose the Bear Totem Spirit (resistance to all non-psychic damage), \r\n//!!!   in your 5E character sheet, double-check that the name of your Totem Spirit feature to EXACTLY \"Totem Spirit: Bear\".  Note: Importing                   \r\n//!!!   via VTTA Beyond Integration uses this name already. The macro then automatically adds the extra Bear Totem Spirit resistances.                                                      \r\n//!!!                                                                                                                                      \r\n//!!!\tBonus Tip 2: Thrown Weapons\r\n//!!!\tWhen a barb throws a weapon using strength, typically a javelin but also possibly a dagger, dart, sword, bar table etc, the adrenaline bonus\r\n//!!!\tshould not be added because it is a ranged attack. However, D&D5E calls javelins and daggers Melee Weapons, because technically they\r\n//!!!\tare both. To solve this issue, if you always throw the weapon, click the weapon's details and change the attack type to \"Ranged Weapon\r\n//!!!\tAttack\" in the Action Type dropdown. If you want, you can add a second copy of the item (with no weight/quantity) to use for meleeing.\r\n//!!!\r\n//!!!   Bonus Tip 3: The adrenaline Condition                                                                                                                       \r\n//!!!   If you use the Combat Utility Belt module's Condition Lab, try adding a condition called \"Raging\" with the same icon \t\t\t   \r\n//!!!   as the optional adrenaline icon overlay, 'icons/svg/explosion.svg' by default.  See OPTIONAL TOKEN/MACRO ICONS section above.                    \r\n//!!!\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n\r\n//declarations\r\nlet barb = '';\r\nlet chatMsg = '';\r\nlet bear = '';\r\nlet noadrenaline = false;\r\nlet toggleResult = false;\r\n\r\n//main\r\n//check to see if Actor exists and is a barbarian\r\nif (actor !== undefined && actor !== null) {\r\n\t\t\t\t\r\n\t// get the barbarian class item\r\n\tbarb = actor.items.find(i => i.name === 'Barbarian');\r\n\tif (barb == undefined) {\r\n\t\tui.notifications.warn(\"Please select a single barbarian token.\");\r\n\t}\r\n\tif (barb !== undefined && barb !== null) {\r\n\t\tchatMsg = '';\r\n\t\tlet enabled = false;\r\n\t\t// store the state of the adrenaline toggle in flags\r\n\t\tif (actor.data.flags.adrenalineMacro !== null && actor.data.flags.adrenalineMacro !== undefined) {\r\n\t\t\tenabled = true;\r\n\t\t}\r\n\t\t\r\n\t\t// if adrenaline is active, disable it\r\n\t\tif (enabled) {\r\n\t\t\tchatMsg = `${actor.name}'s adrenaline subsides.`;\r\n\t\t\t// reset resistances and melee weapon attack bonus\r\n\t\t\tlet obj = {};\r\n\t\t\tobj['flags.adrenalineMacro'] = null;\r\n\t\t\tobj['data.traits.dr'] = actor.data.flags.adrenalineMacro.oldResistances;\r\n\t\t\tlet test=0;\t\t\t\r\n\t\t\tDynamicEffects.setPassive(\"Adrenaline\", false);\t\r\n\t\t\tactor.update(obj);\r\n\t\t\t\r\n\t\t// if adrenaline is disabled, enable it\r\n\t\t} else {\r\n\t\t\tif (deductResource) {\r\n\t\t\t\tlet hasAvailableResource = false;\r\n\t\t\t\tlet newResources = duplicate(actor.data.data.resources)\t\t\t\t\r\n\t\t\t\tlet obj = {}\r\n\t\t\t\t// Look for Resources under the Core actor data\r\n\t\t\t\tlet resourceKey = Object.keys(actor.data.data.resources).filter(k => actor.data.data.resources[k].label === \"Adrenaline\").shift();\r\n\t\t\t\tif (resourceKey && (actor.data.data.resources[resourceKey].value > 0 || !preventNegativeResource)) {\r\n\t\t\t\t\thasAvailableResource = true;\r\n\t\t\t\t\tnewResources[resourceKey].value--;\t\t\t\t\t\r\n\t\t\t\t\tobj['data.resources'] = newResources \r\n\t\t\t\t\tactor.update(obj);\r\n\t\t\t\t}\r\n\t\t\t\tif (!hasAvailableResource) {\r\n\t\t\t\t\tui.notifications.error(`${actor.name} does not have any adrenaline left, time for a long rest!`);\r\n\t\t\t\t\tnoadrenaline=true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//activate adrenaline if there is adrenaline available, or if it is okay to adrenaline with 0 resources\r\n\t\t\tif (!noadrenaline) {\r\n\t\t\t\tchatMsg = `${actor.name} has a surge of adrenaline!`;\r\n\t\t\t\t// update resistance\r\n\t\t\t\tlet obj = {};\r\n\t\t\t\t// storing old resistances in flags to restore later\r\n\t\t\t\tobj['flags.adrenalineMacro.enabled'] = true;\r\n\t\t\t\tobj['flags.adrenalineMacro.oldResistances'] = JSON.parse(JSON.stringify(actor.data.data.traits.dr));\r\n\t\t\t\t// add bludgeoning, piercing and slashing resistance\r\n\t\t\t\tlet newResistance = duplicate(actor.data.data.traits.dr);\r\n\t\t\t\tif (newResistance.value.indexOf('bludgeoning') === -1) newResistance.value.push('bludgeoning');\r\n\t\t\t\tif (newResistance.value.indexOf('piercing') === -1) newResistance.value.push('piercing');\r\n\t\t\t\tif (newResistance.value.indexOf('slashing') === -1) newResistance.value.push('slashing');\r\n\t\t\t\t//If bear totem, add bear totem resistances.\r\n\t\t\t\tbear = actor.items.find(i => i.name === \"Totem Spirit: Bear\")\r\n\t\t\t\tif (bear !== undefined && bear!== null) {\r\n\t\t\t\t\tif (newResistance.value.indexOf('acid') === -1) newResistance.value.push('acid');\r\n\t\t\t\t\tif (newResistance.value.indexOf('cold') === -1) newResistance.value.push('cold');\r\n\t\t\t\t\tif (newResistance.value.indexOf('fire') === -1) newResistance.value.push('fire');\r\n\t\t\t\t\tif (newResistance.value.indexOf('force') === -1) newResistance.value.push('force');\r\n\t\t\t\t\tif (newResistance.value.indexOf('lightning') === -1) newResistance.value.push('lightning');\r\n\t\t\t\t\tif (newResistance.value.indexOf('necrotic') === -1) newResistance.value.push('necrotic');\r\n\t\t\t\t\tif (newResistance.value.indexOf('poison') === -1) newResistance.value.push('poison');\r\n\t\t\t\t\tif (newResistance.value.indexOf('radiant') === -1) newResistance.value.push('radiant');\r\n\t\t\t\t\tif (newResistance.value.indexOf('thunder') === -1) newResistance.value.push('thunder');\r\n\t\t\t\t}\r\n\t\t\t\tobj['data.traits.dr'] = newResistance;\r\n\t\t\t\tactor.update(obj);\r\n\t\t\t\r\n\t\t\t\t// For Strength barbarians, update global melee weapon attack bonus to include adrenaline bonus\r\n\t\t\t\t{DynamicEffects.setPassive(\"Adrenaline\", true);\r\nactor.update(obj);}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!noadrenaline) {\r\n\t\t\t// toggle adrenaline icon, if adrenaline path is defined above\r\n\t\t\t(async () => { \r\n\t\t\t\ttoggleResult = await token.toggleEffect(adrenalineIconPath);\r\n\t\t\t\tif (toggleResult == enabled) token.toggleEffect(adrenalineIconPath);  \r\n\t\t\t})();\r\n\t\t\t\r\n\t\t\t//toggle macro icon and name, if macro name is correct and stop adrenaline icon path is defined\r\n\t\t\tlet adrenalineMacro = game.macros.getName(adrenalineMacroName);\r\n\t\t\t\t//check for name of macro in its \"off\" form\r\n\t\t\t\tif (adrenalineMacro == null || adrenalineMacro == undefined) {\r\n\t\t\t\t\tadrenalineMacro = game.macros.getName('Stop ' + adrenalineMacroName);\r\n\t\t\t\t}\r\n\t\t\tlet obj = {};\r\n\t\t\tif ( (adrenalineMacro !== null && adrenalineMacro !== undefined) && toggleMacro == true && \r\n\t\t\t\t\t+ (stopadrenalineIconPath !== null && stopadrenalineIconPath !== undefined && stopadrenalineIconPath !== '') ) {\r\n\t\t\t\tif (enabled) {\r\n\t\t\t\t  obj['img'] = adrenalineIconPath;\r\n\t\t\t\t  obj['name'] = adrenalineMacroName;\r\n\t\t\t\t} else {\r\n\t\t\t\t  obj['img'] = stopadrenalineIconPath;\r\n\t\t\t\t  obj['name'] = 'Stop ' + adrenalineMacroName;\r\n\t\t\t\t}\r\n\t\t\t\tadrenalineMacro.update(obj);\r\n\t\t\t} else {\r\n\t\t\tif (toggleMacro == true) ui.notifications.warn(\"adrenaline macro named \" + `${adrenalineMacroName}` + \" not found. adrenaline toggle successful but unable to toggle macro icon.\");\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n} else ui.notifications.warn(\"Please select a token.\");\r\n// write to chat if needed:\r\nif (chatMsg !== '') {\r\n\tlet chatData = {\r\n\t\tuser: game.user._id,\r\n\t\tspeaker: ChatMessage.getSpeaker(),\r\n\t\tcontent: chatMsg\r\n\t};\r\n\tChatMessage.create(chatData, {});\r\n}","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/red_10.jpg","actorIds":[],"_id":"nXmGp2vj6MO8v4fC"}
{"name":"Brutal Strike","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"DynamicEffects.togglePassive(\"Brutal Strike\", \"feat\")","author":"hxuIOO4uITpZc3pG","img":"systems/dnd5e/icons/skills/red_12.jpg","actorIds":[],"_id":"ouW1eRNzzmgkpetv"}
{"name":"Handaxe of Warning","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"dnd5e":{"itemMacro":true}},"scope":"global","command":"game.dnd5e.rollItemMacro(\"Handaxe of Warning\");","author":"hxuIOO4uITpZc3pG","img":"systems/dnd5e/icons/items/weapons/glaive.png","actorIds":[],"_id":"pmMapLwCUDoIXQhq"}
{"name":"Drunnigtreh Bow (Magic Charges)","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"dnd5e":{"itemMacro":true},"furnace":{"runAsGM":false}},"scope":"global","command":"<div style=\"font-size: 1.25em; font-family: 'Signika'; font-weight: bold; margin: 0px; padding: 0px;\">Drunnigtreh Bow Magic Charges</div><hr><div style=\"margin-bottom: 7px;\"><b>Damage:</b> [[ ?{Charges Used|1 ,1d4 +(@prof * 1)|2 ,2d4 + (@prof *  2)|3 ,3d4 + (@prof *  3)|4 ,4d4 + (@prof *  4)|5 ,5d4 + (@prof *  5)} ]] piercing</div>","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/green_01.jpg","actorIds":[],"_id":"qJeF6xUuWYHfjst4"}
{"name":"Equip/Unequip Shield","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"DynamicEffects.togglePassive(\"Shield\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/items/armor/buckler.PNG","actorIds":[],"_id":"qSQXKRbOI7gn3AEt"}
{"name":"Tireless","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"chat","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"/roll 1d10+@abilities.wis.mod\r\n\r\n#The \"Tireless\" ability confers temporary HP. Apply this manually in the character sheet.","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/green_19.jpg","actorIds":[],"_id":"qaR5Okf7rArJSUoO"}
{"name":"Insight Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"actor.rollSkill(\"ins\")","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/red_09.jpg","actorIds":[],"_id":"rwqaie35ZJoUh873"}
{"name":"Shield Spell","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"script","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"DynamicEffects.togglePassive(\"Shield\", \"spell\")","author":"hxuIOO4uITpZc3pG","img":"systems/dnd5e/icons/spells/protect-magenta-1.jpg","actorIds":[],"_id":"xcYrxbzlzekVTUlT"}
{"name":"Norris Perception Check","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"chat","flags":{"furnace":{"runAsGM":false}},"scope":"global","command":"#Norris Perception Check\r\n\r\n/r 2d20kh+3","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/shadow_12.jpg","actorIds":[],"_id":"yTJP5LDaelJNUt1i"}
{"_id":"qaR5Okf7rArJSUoO","name":"Tireless","permission":{"default":0,"hxuIOO4uITpZc3pG":3},"type":"chat","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""}},"scope":"global","command":"/r 1d10+@abilities.wis.mod #TIRELESS grants temporary HP. Add this manually by clicking \"+Temp\" on the character sheet under HP.","author":"hxuIOO4uITpZc3pG","img":"systems/pf1/icons/skills/green_19.jpg","actorIds":[]}
